doctype html
html(lang='en')
  head
    // Required meta tags
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')
    title Unplug - The mental health self help platform
    meta(name='description', content='Unplug is the mental health self help platform')
    // Google font
    link(href='https://fonts.googleapis.com/css?family=K2D:300,400,500,700,800', rel='stylesheet')
    // Bootstrap CSS / Color Scheme
    link(rel='stylesheet', href='css/bootstrap.css')
  body
    // Header Section
    section.bg-gradient.pt-5.pb-6
      .container
        .row
          .col-12.d-flex.flex-row.align-items-center.justify-content-between
            .heading-brand Unplug
            a.btn.btn-dark(href='https://prismjs.com/download.html', target='_blank') Contact
        .row.mt-6
          .col-md-8.mx-auto.text-center
            h1 Mood Graphs
            p.lead.mb-5
              | Understanding your moods helps you manage them and feel better faster.
              | If you are more aware of your moods, you may be able to better manage your lifestyle choices,
              | make informed health decisions, prevent or avoid triggers of negative moods, and work towards a better quality of life.
        .row.mt-5
          .col-md-9.mx-auto
            .code-window
              .dots
                .red
                .orange
                .green
              br
              form(action="/", method="POST")
                div.form-group
                  label(for="feeling")
                    h3 What are you thinking today?
                  input.form-control(name="feeling", type="text", id="feeling", placeholder="Enter your thoughts")
                button.btn.btn-success.svg-icon(type="submit")
                  em.mr-2(data-feather='send')
                  | Log in Mood Graph
    // Features Section
    section.py-6
      .container
        .row
          .col-md-8.mx-auto
            h2.text-center.text-md-left
              | Your Mood Graph for 
              span.text-success April 2021
            div
              canvas(id="myChart")
            script(src="javascripts/chart.js")
            script.
              current = !{JSON.stringify(current)};
              while(current.length < 30) current.push("Unknown");
              console.log(current);

              const data = {
                datasets: [{
                  label: 'Mood Graph',
                  hoverOffset: 4
                }],
              }

              dataArray = []
              colourArray = []
              labelArray = []
              date = 1

              //background #282C34
              feelingColours = {
                "Joy": "#98c379",
                "Sadness": "#61afef",
                "Anger": "#e06c75",
                "Fear": "#e5c07b",
                "Unknown": "#abb2bf",
              }

              for(const feeling of current){
                dataArray.push(1);
                colourArray.push(feelingColours[feeling]);
                labelArray.push(date.toString() + "/4/2021");
                date += 1;
              }
              data.labels = labelArray;
              data.datasets[0].data = dataArray;
              data.datasets[0].backgroundColor = colourArray;
              
              const config = {
                type: 'doughnut',
                data: data,
                options: { 
                  responsive: false,
                  plugins: {
                    legend: {
                      display: false,
                    },
                  },
                  animation: {
                    animateScale: true,
                  }
                },
                borderAlign: "center",
              };
              window.onload = function(){
                var myChart = new Chart(
                  document.getElementById('myChart'),
                  config
                );
                document.getElementById('myChart').style.margin = "auto";
              }
            .row.feature-grid
              .col-sm-6
                .media
                  .icon-box
                    .icon-box-inner
                      span(data-feather='smile', width='28', height='28', color="#98c379")
                  .media-body
                    | Joy
              .col-sm-6
                .media
                  .icon-box
                    .icon-box-inner
                      span(data-feather='frown', width='28', height='28', color="#61afef")
                  .media-body
                    | Sadness
              .col-sm-6
                .media
                  .icon-box
                    .icon-box-inner
                      span(data-feather='frown', width='28', height='28', color="#e06c75")
                  .media-body
                    | Anger
              .col-sm-6
                .media
                  .icon-box
                    .icon-box-inner
                      span(data-feather='meh', width='28', height='28', color='#e5c07b')
                  .media-body
                    | Fear
              .col-sm-6
                .media
                  .icon-box
                    .icon-box-inner
                      span(data-feather='meh', width='28', height='28', color='#abb2bf')
                  .media-body
                    | Unknown
    // Used By Section
    section.pb-6
      .container
        .row
          .col-md-8.mx-auto
            h2.text-center.text-md-left Used by Thousands of Companies
            p.lead.text-muted Prism.js is used on several websites, small and large.
            .mt-5.d-flex.flex-row.justify-content-md-between.flex-wrap.press-icons
              img(src='https://logo.clearbit.com/google.com?size=60', alt='Google')
              img(src='https://logo.clearbit.com/twitter.com?size=60', alt='Twitter')
              img(src='https://logo.clearbit.com/vuejs.org?size=60', alt='Veu.js')
              img(src='https://logo.clearbit.com/stripe.com?size=60', alt='Stripe')
    // footer
    footer.py-5.bg-light
      .container
        .row
          .col-12.text-center
            ul.list-inline
              li.list-inline-item
                a(href='/') Mood Graph
              li.list-inline-item
                a(href='/users') Find Help
              li.list-inline-item
                a(href='/') About
        .row.my-2
          .col-md-4.mx-auto.text-muted.text-center.small-xl
            | Â© 2021 Unplug - All Rights Reserved
    // jQuery first, then Popper.js, then Bootstrap JS
    script(src='https://code.jquery.com/jquery-3.2.1.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.28.0/feather.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/line-numbers/prism-line-numbers.min.js')
    script(src='js/scripts.js')